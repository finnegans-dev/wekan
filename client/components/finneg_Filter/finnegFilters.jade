//-
  XXX There is a *lot* of code duplication in the below templates and in the
  corresponding JavaScript components. We will probably need the upcoming #let
  and #each x in y constructors to fix this.

template(name="finnegFilter")
  .container
    .title
      h3 Filtros
    .main
      .left
        ul
        li.menu-item.js-select-filter-tags(class="{{#if getMenuSelected 'tags'}}selected{{/if}}")
          a.name
            span Etiquetas {{tagsSelected.get}}
        li.menu-item.js-select-filter-privacy(class="{{#if getMenuSelected 'privacy'}}selected{{/if}}")
          a.name
            span Privaciadad {{memebersSelected.get}}
        li.menu-item.js-select-filter-assignedto(class="{{#if getMenuSelected 'assignedto'}}selected{{/if}}")
          a.name
            span Asignado {{assingToSelected.get}}
        li.menu-item.js-select-filter-view(class="{{#if getMenuSelected 'view'}}selected{{/if}}")
          a.name
            span Ver
      .right
        if getMenuSelected "tags"
          +finnegTags
        if getMenuSelected "privacy"
          +finnegPrivacy
        if getMenuSelected "assignedto"
          +finnegAssigned
        if getMenuSelected "view"
          +finnegViewMenuPopup
    .bottom
      button.js-close-modal cerrar


template(name="finnegMultiselectionPopupFilter")
  ul.sidebar-list
    each currentBoard.labels
      li
        a.name.js-toggle-label-multiselection
          span.card-label.square(class="card-label-{{color}}")
          span.sidebar-list-item-description
            if name
              = name
            else
              span.quiet {{_ "label-default" (_ (concat "color-" color))}}
          if allSelectedElementHave 'label' _id
            i.fa.fa-check
          else if someSelectedElementHave 'label' _id
            i.fa.fa-ellipsis-h
  hr
  ul.sidebar-list
    each currentBoard.activeMembers
      with getUser userId
        li(class="{{#if Filter.members.isSelected _id}}active{{/if}}")
          a.name.js-toggle-member-multiselection
            +userAvatar(userId=this._id)
            span.sidebar-list-item-description
              = profile.fullname
              | (<span class="username">{{ username }}</span>)
            if allSelectedElementHave 'member' _id
              i.fa.fa-check
            else if someSelectedElementHave 'member' _id
              i.fa.fa-ellipsis-h
  hr
  a.sidebar-btn.js-move-selection
    i.fa.fa-share
    span {{_ 'move-selection'}}
  a.sidebar-btn.js-archive-selection
    i.fa.fa-archive
    span {{_ 'archive-selection'}}

template(name="finnegDisambiguateMultiLabelPopup")
  p {{_ 'what-to-do'}}
  button.wide.js-remove-label {{_ 'remove-label'}}
  button.wide.js-add-label {{_ 'add-label'}}

template(name="finnegDisambiguateMultiMemberPopup")
  p {{_ 'what-to-do'}}
  button.wide.js-unassign-member {{_ 'unassign-member'}}
  button.wide.js-assign-member {{_ 'assign-member'}}

template(name="finnegMoveSelectionPopup")
  +boardLists

template(name="finnegTags")
  ul.sidebar-list
    li(class="{{#if Filter.labelIds.isSelected undefined}}active{{/if}}")
      a.name.js-toggle-label-filter
        span.sidebar-list-item-description
          | {{_ 'filter-no-label'}}
        if Filter.labelIds.isSelected undefined
          i.fa.fa-check
    each currentBoard.labels
      li
        a.name.js-toggle-label-filter
          span.card-label.square(class="card-label-{{color}}")
          span.sidebar-list-item-description
            if name
              = name
            else
              span.quiet {{_ "label-default" (_ (concat "color-" color))}}
          if Filter.labelIds.isSelected _id
            i.fa.fa-check


template(name="finnegPrivacy")
  ul.sidebar-list
    span Privado para
    //li(class="{{#if Filter.members.isSelected undefined}}active{{/if}}")
          a.name.js-toggle-member-filter
            span.sidebar-list-item-description
              | {{_ 'filter-no-member'}}
            if Filter.members.isSelected undefined
              i.fa.fa-check
    each currentBoard.activeMembers
      with getUser userId
        li(class="{{#if Filter.members.isSelected _id}}active{{/if}}")
          a.name.js-toggle-member-filter
            +userAvatar(userId=this._id)
            span.sidebar-list-item-description
              = profile.fullname
              | (<span class="username">{{ username }}</span>)
            if Filter.members.isSelected _id
              i.fa.fa-check

template(name="finnegAssigned")
  ul.sidebar-list
    li(class="{{#if Filter.assignedTo.isSelected undefined}}active{{/if}}")
          a.name.js-toggle-assignedTo-filter
            span.sidebar-list-item-description
              | {{_ 'filter-not-assigned'}}
            if Filter.assignedTo.isSelected undefined
              i.fa.fa-check
    li(class="{{#if Filter.userId.isSelected undefined}}active{{/if}}")
          a.name.js-toggle-assigned-filter
            span.sidebar-list-item-description
              | {{_ 'filter-assigned-me'}}
            if Filter.userId.isSelected currentUser._id
              i.fa.fa-check
    each currentBoard.activeMembers
      with getUser userId
        li(class="{{#if Filter.members.isSelected _id}}active{{/if}}")
          a.name.js-toggle-assignedTo-filter
            +userAvatar(userId=this._id)
            span.sidebar-list-item-description
              = profile.fullname
              | (<span class="username">{{ username }}</span>)
            if Filter.assignedTo.isSelected _id
              i.fa.fa-check

template(name="finnegViewMenuPopup")
  ul.pop-over-list
    li
      a.js-view-all Todo
        if isSelected 'all'
          i.fa.fa-check(style="float: right;padding-right: 15px;line-height: 30px;")
    li
      a.js-view-pending Pendiente
        if isSelected 'pending'
          i.fa.fa-check(style="float: right;padding-right: 15px;line-height: 30px;")
    li
      a.js-view-finished Finalizado
        if isSelected 'finished'
          i.fa.fa-check(style="float: right;padding-right: 15px;line-height: 30px;")
